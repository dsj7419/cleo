# Analysis: Workflow Integration & LLM Agent Guides

**Date:** 2026-01-06
**Source:** @docs/integration/WORKFLOWS.md
**Objective:** Synthesize valid workflows and recipes to integrate "LLM AGENT FIRST" guides into CLEO.

## 1. Validated Core Workflows

The following workflows are fully supported by the current CLI implementation (`scripts/`) and should be canonized in the "LLM Agent First" guides.

### Session Management
*   **Start**: `cleo session start` (supports naming and scoping).
*   **Work**: `cleo focus set`, `cleo add --depends`, `cleo update --notes`.
*   **End**: `cleo complete`, `cleo session end`.
*   **Status**: `cleo session status` (or `cleo session list`).

### Task Lifecycle
*   **Creation**: `cleo add "Title" --phase <slug> --size <size> --labels <labels>`.
*   **Transitions**: `pending` → `active` (via focus) → `done` (via complete) or `blocked` (via update).
*   **Archive**: `cleo archive` (supports archiving completed tasks).

### Data Interaction
*   **Discovery**: `cleo find` (fuzzy search) and `cleo list` (filtering).
*   **Details**: `cleo show` (full JSON/details).
*   **Project Overview**: `cleo dash` (dashboard).

## 2. Recipe Candidates

The following recipes from `WORKFLOWS.md` are valid compositions of existing commands and can be implemented as user scripts or documented patterns.

### High Value / Low Effort
1.  **Sprint Planning (`sprint-setup.sh`)**:
    *   *Logic*: Batch `cleo add` with consistent labels (e.g., `sprint-12`) and priorities.
    *   *Feasibility*: **High**. Standard loop over an array or CSV.

2.  **Bug Triage (`triage-bugs.sh`)**:
    *   *Logic*: Create tasks with `bug` label, specific descriptions, and priorities.
    *   *Feasibility*: **High**. Simple `cleo add` wrapper.

3.  **Standup Report (`standup-report.sh`)**:
    *   *Logic*: `cleo list --status done --since yesterday` + `cleo list --status active` + `cleo list --status blocked`.
    *   *Feasibility*: **High**. `cleo list` supports `--status` and `--since` (via `history` or list filters).

4.  **Release Prep (`prepare-release.sh`)**:
    *   *Logic*: Chained task creation where Task B depends on Task A.
    *   *Feasibility*: **High**. `cleo add` returns JSON with ID, which can be piped to the next `cleo add --depends`.

5.  **Sprint Cleanup (`sprint-cleanup.sh`)**:
    *   *Logic*: Report stats, archive, backup, and list carry-overs.
    *   *Feasibility*: **High**. Combines `stats`, `archive`, `backup`, and `list`.

### Advanced / Complex
1.  **Batch Task Creation**:
    *   *Logic*: Parsing CSV/JSON to drive `cleo add`.
    *   *Feasibility*: **Medium**. Requires robust parsing logic (jq/awk) in the script.

2.  **Bulk Status Updates**:
    *   *Logic*: `cleo list` -> extract IDs -> loop `cleo update`.
    *   *Feasibility*: **High**. Standard pipe pattern.

## 3. Integration Gaps & Hypothetical Features

*   **Automated Hooks (`on-commit.sh`)**:
    *   *Status*: **Hypothetical**. There is no standard `.cleo/hooks` directory or runner in the main execution path yet.
    *   *Action*: Define a hook specification or document how to use `git` hooks to call `cleo`.

*   **Archive Policies**:
    *   *Status*: **Partial**. `archive.sh` exists, but complex retention policies (`maxCompletedTasks`, `preserveRecentCount`) need verification in `lib/archive.sh` or `schemas/config.schema.json`.

*   **Automated Reporting**:
    *   *Status*: **Manual**. Reports are currently generated by shell scripts piping `cleo` output. A native `cleo report` command could simplify this.

## 4. Recommendations for "LLM AGENT FIRST" Guides

To make these accessible to agents:

1.  **CLI Access**:
    *   Implement `cleo guides list` and `cleo guides show <topic>` (or `cleo help workflows`).
    *   Store guides as Markdown in `docs/guides/` or `claudedocs/guides/`.

2.  **Structure**:
    *   **Intent**: What is the goal? (e.g., "Start Sprint")
    *   **Prerequisites**: context or config needed.
    *   **Steps**: Exact `cleo` commands to run.
    *   **Validation**: How to verify success.

3.  **Recipe Library**:
    *   Create a `recipes/` directory in the repo.
    *   Populate it with the shell scripts identified in "Recipe Candidates".
    *   Allow agents to run these scripts directly (e.g., `bash recipes/sprint-setup.sh`).

4.  **Context Injection**:
    *   Ensure `cleo help` or `AGENTS.md` references these recipes so agents know they exist.
